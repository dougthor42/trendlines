{% extends "trendlines/layout.html" %}

{% block body %}

<h1>{{ name }}</h1>

<div id="change-axis-buttons" class="btn-group btn-group-toggle" data-toggle="buttons">
  <label class="btn btn-primary active">
    <input id="x-axis-type-sequential" type="radio" name="x-axis-type" autocomplete="off" value="sequential" checked>Sequential
  </label>
  <label class="btn btn-primary">
    <input id="x-axis-type-time" type="radio" name="x-axis-type" autocomplete="off" value="time">Time Series
  </label>
</div>

<div id="graph" style="width:90%; height:500px;"></div>

<script>
  TESTER = document.getElementById('graph');

  var data = {{ data | tojson | safe }};
  console.log(data);

  // I think Plotly only accepts 1D arrays of data, so split things out.
  var x = data.rows.map(function (obj) {return obj.timestamp});
  var y = data.rows.map(function (obj) {return obj.value});
  var n = data.rows.map(function (obj) {return obj.n});

  trace1 = {
    x: n,
    y: y,
    type: 'scatter'
  };

  trace = [ trace1 ];
  Plotly.plot(TESTER, trace);

</script>

{% endblock %}

<!-- vim: set expandtab tabstop=2 shiftwidth=2 softtabstop=2: -->
